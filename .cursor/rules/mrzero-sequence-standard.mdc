---
description: MRzero sequence function standardization guidelines
globs: *.ipynb
---

# MRzero Sequence Function Standard

Based on [seq_funtion_standered.txt](mdc:seq_funtion_standered.txt), all sequence functions must follow these guidelines:

## Function Structure
- Sequence functions must be named `seq_sequenceName` (e.g., `seq_FLASH`)
- Functions must return a `pp.Sequence` object
- Use torch for all computations
- Functions should be standalone and reusable

## Standard Parameters
All sequence functions must accept these standard input arguments from [seq_funtion_standered.txt](mdc:seq_funtion_standered.txt):

### Required Parameters:
- `fov`: tuple of floats (x, y, z) in meters
- `Nread`: int - frequency encoding steps
- `Nphase`: int - phase encoding steps  
- `Npart`: int - number of partitions
- `FA`: tensor - flip angle
- `shim`: tensor - shim values
- `TR`: tensor - repetition time
- `TE`: tensor - echo time
- `slice_thickness`: float - slice thickness
- `encoding`: string - encoding type
- `R`: tuple of 2 - acceleration factors (Ry, Rz)
- `experiment_id`: string - experiment identifier
- `system`: optional scanner system limits
- `verbose`: bool - verbose output

### Standard Defaults:
- `fov=(220e-3, 220e-3, 8e-3)`
- `Nread=96`
- `Nphase=96` 
- `Npart=1`

## Required Sequence Definitions
Every sequence function must include these `seq.set_definition()` calls:
```python
seq.set_definition('name', experiment_id)
seq.set_definition('fov', [fov[0], fov[1], fov[2]])
seq.set_definition('matrix', [Nread, Nphase, Npart])
```

## Variables Used Outside Function
For any variables computed inside the function that are needed outside, use:
```python
seq.set_definition('variable_name', variable_name)
```

To retrieve these variables outside the function:
```python
variable_name = seq.get_definition('variable_name')
```

## Function Organization
1. **Cell Structure**: Place function definition in separate cell from usage
2. **Variable Definition**: Define parameters as plain variables before function call
3. **Function Call**: Pass plain variables as arguments, not inline values
4. **No Additional Behaviors**: Functions should only generate sequences, no file I/O or plotting

## Example Implementation
See [mr0_FLASH_2D_seq.ipynb](mdc:documentation/playground_mr0/mr0_FLASH_2D_seq.ipynb) for reference implementation.